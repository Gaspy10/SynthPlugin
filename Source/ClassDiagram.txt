@startuml

class "maxiOsc" as maxiOscA

class JuceSynthPluginAudioProcessor{
    processBlock()
}

class maxiOsc{
    sinewave(double frequency)
    saw(double frequency)
    triangle(double frequency)
    square(double frequency)
}

class maxiOscA{
    sinewave(double frequency)
    saw(double frequency)
    triangle(double frequency)
    square(double frequency)
}

class WavetableVoice{
    renderNextBlock()
}

class FIRFilter{
    setCutoff(float cutoffHzLow, float cutoffHzHigh)
    processSample(float inputSample)
}

class maxiEnv{
    adsr(double input, int trigger)
    setAttackMS(double attackMS)
    setDecay(double decaykMS()
    setSustain(double sustainMS)
    setRelease(double releaseMS)
}

class Synthesiser{
    addVoice(SynthesiserVoice* const newVoice)
    addSound(const SynthesiserSound::Ptr& newSound)
}

class PluginEditor{
    resized()
}

class WaveFormSettings{
    getVelocity()
    getCutoffLowFrequency()
    getCutoffHighFrequency()
    getAttackValue()
}

class AudioBuffer{
    setSample(int destChannel, int destSample, Type newValue)
}

class MidiKeyboardState{
    processNextMidiBuffer()
}

class MidiKeyboardComponent{
    handleNoteOn()
    handleNoteOff()
}

class OpenAIClient{
	createTextResponse()
}

class PresetGenerationJob{
	runJob()
}

class ThreadPool{
	addJob()
}

PresetGenerationJob --> OpenAIClient
WaveFormSettings --> AudioProcessorValueTreeState
PluginEditor *-- "1" ThreadPool
PluginEditor *-- "1" OpenAIClient
ThreadPool *-- "1" PresetGenerationJob
JuceSynthPluginAudioProcessor *-- "1" Synthesiser
JuceSynthPluginAudioProcessor *-- "1" AudioProcessorValueTreeState
PluginEditor --> AudioProcessorValueTreeState
JuceSynthPluginAudioProcessor --> WavetableVoice
WavetableVoice *-- "1" maxiOsc
WavetableVoice *-- "1" maxiEnv
WavetableVoice *-- "1" FIRFilter
JuceSynthPluginAudioProcessor *-- "1" WaveFormSettings
Synthesiser *-- "10" WavetableVoice
WavetableVoice --> WaveFormSettings
JuceSynthPluginAudioProcessor *-- "1" maxiOscA
WavetableSound "1" --* Synthesiser 
JuceSynthPluginAudioProcessor *-- "1" MidiKeyboardState
MidiKeyboardState <-- MidiKeyboardComponent
JuceSynthPluginAudioProcessor *-- "1" AudioBuffer
AudioBuffer <-- WavetableVoice

PluginEditor  *-- "1" MidiKeyboardComponent 

@enduml